import{_ as U}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-CMK4CvhP.js";import{d as h,a as b,e as w,b as s,t as c,h as z,i as q,j as v,k as u,l as $,g as d,w as g,m as _,v as p,u as e,M as n,n as D,p as P,c as V}from"./index-BX7TXqV0.js";import{_ as S}from"./FormContainer.vue_vue_type_script_setup_true_lang-Df0427Rg.js";const A={class:"d-flex justify-content-betweeen"},E={class:"fw-ligth"},j=h({__name:"Subheader",props:{title:String},setup(f){return(a,t)=>(b(),w("nav",A,[s("h3",E,c(f.title),1),z(a.$slots,"default")]))}}),k={class:"w-100 d-flex"},T={class:"col-12 col-lg-6"},B={class:"mb-3"},C=s("label",{for:"name",class:"form-label"},"Nome",-1),I={class:"text-danger"},M={class:"mb-3"},N=s("label",{for:"email",class:"form-label"},"Email",-1),R={class:"text-danger"},Y={class:"d-flex justify-content-end"},F=["disabled"],O=h({__name:"UpdateProfileInfo",setup(f){var o,l;const a=q(),t=v({name:(o=a.getUser)==null?void 0:o.name,email:(l=a.getUser)==null?void 0:l.email});t.defineYupRules({name:u().min(3,"name.min").max(255,"name.max").required("name.required"),email:u().email("email.invalid").max(255,"email.max").required("email.required")});async function i(){t.submit({method:"put",url:"/user/update",onSuccess(r){a.updateUserInformations(t.getData()),iziToast.success({title:"Sucesso",message:n.success(r.data.message??"")})}})}return(r,m)=>{const y=$("max-length");return b(),w("section",null,[d(S,{title:"Atualizar informações do perfil","handle-submit":i},{default:g(()=>[s("div",k,[s("div",T,[s("div",B,[C,_(s("input",{"onUpdate:modelValue":m[0]||(m[0]=x=>e(t).data.name=x),type:"name",class:"form-control",id:"name",placeholder:"Carlos De Souza",autocomplete:"name"},null,512),[[p,e(t).data.name],[y,255]]),s("small",I,c(e(n).error(e(t).errors.name)),1)]),s("div",M,[N,_(s("input",{"onUpdate:modelValue":m[1]||(m[1]=x=>e(t).data.email=x),type:"email",class:"form-control",id:"email",placeholder:"your@email.com",autocomplete:"email"},null,512),[[p,e(t).data.email],[y,255]]),s("small",R,c(e(n).error(e(t).errors.email)),1)]),s("div",Y,[s("button",{class:"btn btn-primary col-12 col-lg-3 mb-2",disabled:e(t).isProcessing()}," Salvar ",8,F)])])])]),_:1})])}}}),G={class:"w-100 d-flex"},H={class:"col-12 col-lg-6"},J={class:"mb-3"},K=s("label",{for:"current_password",class:"form-label"},"Senha Atual",-1),L={class:"text-danger"},Q={class:"mb-3"},W=s("label",{for:"password",class:"form-label"},"Senha",-1),X={class:"text-danger"},Z={class:"mb-3"},ss=s("label",{for:"password_confirmation",class:"form-label"},"Confirmar senha",-1),es={class:"text-danger"},as={class:"d-flex justify-content-end"},ts=["disabled"],os=h({__name:"UpdatePassword",setup(f){const a=v({current_password:"",password:"",password_confirmation:""});a.defineYupRules({current_password:u().required("current_password.required"),password:u().min(8,"password.min").max(255,"password.max").required("password.required"),password_confirmation:u().oneOf([D("password"),null],"password.confirmed").required("password_confirmation.required")});async function t(){console.log(a.getErrors()),a.submit({method:"put",url:"/user/update/password",onSuccess(i){iziToast.success({title:"Sucesso",message:n.success(i.data.message??"")})},onError(i){console.log(a.getErrors()),console.log(i)},onFinally(){a.resetData()}})}return(i,o)=>{const l=$("max-length");return b(),w("section",null,[d(S,{title:"Atualizar senha","handle-submit":()=>t()},{default:g(()=>[s("div",G,[s("div",H,[s("div",J,[K,_(s("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>e(a).data.current_password=r),type:"password",class:"form-control",id:"current_password"},null,512),[[p,e(a).data.current_password],[l,255]]),s("small",L,c(e(n).error(e(a).errors.current_password)),1)]),s("div",Q,[W,_(s("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>e(a).data.password=r),type:"password",class:"form-control",id:"password"},null,512),[[p,e(a).data.password],[l,255]]),s("small",X,c(e(n).error(e(a).errors.password)),1)]),s("div",Z,[ss,_(s("input",{"onUpdate:modelValue":o[2]||(o[2]=r=>e(a).data.password_confirmation=r),type:"password",class:"form-control",id:"password_confirmation"},null,512),[[p,e(a).data.password_confirmation],[l,255]]),s("small",es,c(e(n).error(e(a).errors.password_confirmation)),1)]),s("div",as,[s("button",{class:"btn btn-primary col-12 col-lg-3 mb-2",disabled:e(a).isProcessing()}," Salvar ",8,ts)])])])]),_:1},8,["handle-submit"])])}}}),rs={class:"col-12 col-lg-6"},ls=s("div",{class:"alert alert-danger mb-3"}," Esta ação é irreversível; portanto, exclua sua conta apenas se estiver absolutamente certo(a) de que quer fazer isso. ",-1),ns={class:"mb-3"},is=s("label",{for:"password_",class:"form-label"},"Senha",-1),ds={class:"text-danger"},cs={class:"d-flex justify-content-end"},ms=["disabled"],us=h({__name:"DeleteProfile",setup(f){const a=q(),t=v({password:""});t.defineYupRules({password:u().min(8,"password.min").max(255,"password.max").required("password.required")});async function i(){t.submit({method:"delete",url:"/user/delete",onSuccess(o){setTimeout(()=>{iziToast.success({title:"Sucesso",message:n.success(o.data.message??"")})},1e3),a.revokeAuthentication(),P.push({name:"welcome"})}})}return(o,l)=>{const r=$("max-length");return b(),w("section",null,[d(S,{title:"Atualizar informações do perfil","handle-submit":()=>i()},{default:g(()=>[s("div",rs,[ls,s("div",ns,[is,_(s("input",{"onUpdate:modelValue":l[0]||(l[0]=m=>e(t).data.password=m),type:"password",class:"form-control",id:"password_"},null,512),[[p,e(t).data.password],[r,255]]),s("small",ds,c(e(n).error(e(t).errors.password)),1)]),s("div",cs,[s("button",{class:"btn btn-danger col-12 col-lg-3 mb-2",disabled:e(t).isProcessing()}," Deletar ",8,ms)])])]),_:1},8,["handle-submit"])])}}}),_s={class:"d-flex flex-column gap-3"},bs=h({__name:"IndexProfile",setup(f){return(a,t)=>(b(),V(U,{class:""},{default:g(()=>[d(j,{title:"Perfil"}),s("div",_s,[d(O),d(os),d(us)])]),_:1}))}});export{bs as default};
